<%= turbo_frame_tag @used_operator.operator_id do %>
  <%= simple_form_for @used_operator, url: clears_used_operator_path, method: method,
  html: { class: 'card bg-base-200 shadow-xl', data: { **stimulus(:click_other) } },
  namespace: @used_operator.operator_id do |f| %>
    <%= f.input :operator_id, as: :hidden %>
    <div class="card-body">
      <div class="flex justify-between">
        <%= image_tag avatar, class: "w-16 h-16", alt: name %>

        <h2 class="card-title"><%= name %></h2>

      </div>

      <fieldset class="join block">
        <legend class="simple_form__label"><%= t("elite") %></legend>
        <div class="flex justify-between">
          <%= f.collection_radio_buttons :elite, (max_elite + 1).times.to_a, :itself, :itself, item_wrapper_tag: nil, item_label_class: 'join-item btn !p-0 flex-grow' do |b| %>

            <%= vite_image_tag UsedOperatorPresenter.elite_image_url(b.value), class: "w-7" %>
            <%= b.radio_button data: {
                             **stimulus_attrs(
                               :click_other,
                               actions: {
                                 change: "clickOther"
                               }
                             )
                           } %>
          <% end %>
        </div>

      </fieldset>

      <%= content_tag(
        :button,
        nil,
        class: "hidden",
        formmethod: "GET",
        formaction: new_clears_used_operator_path,
        data: {
          **stimulus_attrs(:click_other, target: "clickable")
        }
      ) %>

      <% if @used_operator.elite %>
        <%= f.input :level,
                input_html: {
                  class: "w-20 p-0 !h-8",
                  max: max_level,
                  min: 0
                },
                wrapper_html: {
                  class: "flex gap-2 items-center"
                } %>

        <fieldset class="join block">
          <legend class="simple_form__label"><%= t("skill") %></legend>
          <div class="flex">
            <%= f.collection_radio_buttons :skill, (max_skill).times.to_a.map(&:succ), :itself, :itself, item_wrapper_tag: nil, item_label_class: 'join-item btn  !p-0 flex-grow' do |b| %>

              <%= image_tag UsedOperatorPresenter.skill_image_url(
                operator.skill_game_ids[b.value - 1]
              ),
              class: "w-8" %>
              <%= b.radio_button %>
            <% end %>
          </div>

        </fieldset>
        <%= f.input :skill_level,
                as: :select,
                collection: skill_levels,
                label_method: :last,
                value_method: :first %>
        <%= f.button :submit, submit_text, class: "mt-2" %>

      <% end %>
    </div>
  <% end %>
<% end %>
