<% if @clears.length == 0 %>
  <div class="flex flex-col items-center p-8">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1" stroke="#ffffffa0" class="w-20 h-20">
      <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m5.231 13.481L15 17.25m-4.5-15H5.625c-.621 0-1.125.504-1.125 1.125v16.5c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9zm3.75 11.625a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z" />
    </svg>
    <h2 class="text-xl font-medium">No results</h2>
  </div>
<% else %>
  <div class="grid space-y-4 xl:space-y-0 xl:grid-cols-2 xl:gap-4 ">
    <% @clears.each do |clear| %>
      <%= link_to clear_path(clear), data: { turbo_frame: '_top' } do %>
        <div class="">
          <div
            class="
              card
              bg-base-200
              shadow-xl
              cursor-pointer
              hover:outline
              hover:outline-primary
              hover:bg-base-content
              hover:bg-opacity-10
              rounded-none
            "
          >
            <div class="flex space-y-1 xs:space-y-0 xs:space-x-1 flex-col xs:flex-row ">
              <% if clear.verified? %>
                <div class="badge xs:badge-lg rounded-sm badge-success text-success-content">
                  <%= t(:verified) %>
                </div>
              <% else %>
                <div class="badge xs:badge-lg rounded-sm badge-error text-error-content">
                  <%= t(:unverified) %>
                </div>
              <% end %>
              <div class="badge-error hidden"></div>
              <div
                class="
                  badge
                  <%= clear.stageable.type_color %>
                  xs:badge-lg
                  rounded-sm
                  max-w-64
                  line-clamp-1
                  xs:line-clamp-none
                "
              >
                <%= clear.stageable.type_label %>
              </div>
            </div>
            <div class="card-body pb-2 pt-2">
              <div
                class="
                  clear-summary
                  flex
                  flex-col
                  md:flex-row
                  items-start
                  md:items-center
                "
              >
                <div class="flex md:space-x-0 flex-col w-full md:w-48">
                  <h2 class="card-title"><%= clear.stage.code %></h2>
                  <div class="flex space-x-2 w-full">
                    <div class="text-base-content-subdued">
                      <%= by_string(clear.player_name) %></div>
                  </div>
                </div>
                <div class="clear-summary__operator-list grid grid-cols-5 xs:grid-cols-7">
                  <div class="operator-cell--container">
                    <div class="operator-cell flex items-center justify-center">
                      <%= clear.used_operators.size %>
                    </div>
                  </div>
                  <% 13.times do |i| %>
                    <div class="operator-cell--container">
                      <% if (used_operator = clear.used_operators[i]) %>
                        <%# TODO: When hover expand and display stat? %>
                        <%= image_tag used_operator.operator.avatar,
                        class: "operator-cell",
                        alt: used_operator.operator.name %>
                      <% else %>
                        <div class=" operator-cell text-xs flex flex-col items-center justify-center ">
                          <span>NO</span>
                          <span>INFO</span>
                        </div>
                      <% end %>
                    </div>
                  <% end %>
                </div>
              </div>
              <div class="card-actions text-base-content-subdued justify-between z-20">
                <div class="text-base-content-subdued"><%= time_string clear.created_at %>
                </div>
                <%= render Clears::LikeComponent.new(clear: clear) %>
              </div>
            </div>

          </div>
        </div>
      <% end %>
    <% end %>
  </div>
  <div class="mt-4 w-full flex justify-end"><%== render Primer::PagyComponent.new(pagy: @pagy) %></div>
<% end %>